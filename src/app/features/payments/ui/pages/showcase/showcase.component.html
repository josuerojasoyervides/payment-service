<div class="min-h-screen bg-gray-100 py-8">
  <div class="max-w-6xl mx-auto px-4">
    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-3xl font-bold text-gray-900">{{ labels.componentShowcaseTitle() }}</h1>
      <p class="text-gray-600 mt-2">
        {{ labels.componentShowcaseDescription() }}
      </p>
      <div class="flex justify-center gap-4 mt-4 text-sm">
        <a routerLink="/payments/checkout" class="text-blue-600 hover:underline">
          {{ labels.goToCheckoutLabel() }}
        </a>
      </div>
      @if (!hasProviders()) {
        <p class="mt-4 text-amber-600 text-sm">{{ labels.noProvidersAvailable() }}</p>
      }
    </div>

    <!-- Components Grid -->
    <div class="space-y-12">
      <!-- Order Summary -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">OrderSummaryComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            <app-order-summary
              [orderId]="orderSummary.orderId"
              [amount]="orderSummary.amount"
              [currency]="orderSummary.currency"
              [items]="orderSummary.showItems ? orderSummary.items : undefined" />
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <div>
                <label class="label" for="amount">{{ labels.amountLabelShort() }}</label>
                <input id="amount" type="number" class="input" [(ngModel)]="orderSummary.amount" />
              </div>
              <div>
                <label class="label" for="currency">{{ labels.currencyLabel() }}</label>
                <select id="currency" class="input" [(ngModel)]="orderSummary.currency">
                  <option value="MXN">MXN</option>
                  <option value="USD">USD</option>
                </select>
              </div>
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="orderSummary.showItems" />
                {{ labels.showItemsBreakdownLabel() }}
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Provider Selector -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">ProviderSelectorComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            <app-provider-selector
              [descriptors]="providerDescriptors()"
              [selected]="providerSelector.selected ?? catalogProviderIds().p0"
              [disabled]="providerSelector.disabled"
              (providerChange)="providerSelector.selected = $event" />
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <p>
                {{ labels.selectedLabel() }}:
                <code class="bg-gray-100 px-2 py-1 rounded">{{
                  providerSelector.selected ?? catalogProviderIds().p0
                }}</code>
              </p>
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="providerSelector.disabled" />
                {{ labels.disabledLabel() }}
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Method Selector -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">MethodSelectorComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            <app-method-selector
              [methods]="methodSelector.methods"
              [selected]="methodSelector.selected"
              [disabled]="methodSelector.disabled"
              (methodChange)="methodSelector.selected = $event" />
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <p>
                {{ labels.selectedLabel() }}:
                <code class="bg-gray-100 px-2 py-1 rounded">{{ methodSelector.selected }}</code>
              </p>
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="methodSelector.disabled" />
                {{ labels.disabledLabel() }}
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Payment Button -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">PaymentButtonComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            <app-payment-button
              [amount]="paymentButton.amount"
              [currency]="paymentButton.currency"
              [provider]="paymentButton.provider ?? catalogProviderIds().p0"
              [loading]="paymentButton.loading"
              [disabled]="paymentButton.disabled"
              [buttonState]="paymentButton.state"
              (pay)="onPayClick()" />
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <div>
                <label class="label" for="provider">{{ labels.providerLabel() }}</label>
                <select id="provider" class="input" [(ngModel)]="paymentButton.provider">
                  @for (opt of catalogProviderOptions(); track opt.id) {
                    <option [value]="opt.id">{{ opt.label }}</option>
                  }
                </select>
              </div>
              <div>
                <label class="label" for="status">{{ labels.statusLabelShort() }}</label>
                <select id="status" class="input" [(ngModel)]="paymentButton.state">
                  <option value="idle">Idle</option>
                  <option value="loading">{{ labels.loadingLabel() }}</option>
                  <option value="success">{{ labels.successLabel() }}</option>
                  <option value="error">{{ labels.errorLabel() }}</option>
                </select>
              </div>
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="paymentButton.disabled" />
                {{ labels.disabledLabel() }}
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Payment Result -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">PaymentResultComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            @if (paymentResult.showSuccess && sampleIntent(); as intent) {
              <app-payment-result
                [intent]="intent"
                [error]="null"
                (retry)="onRetry()"
                (newPayment)="onNewPayment()" />
            } @else {
              <app-payment-result
                [intent]="null"
                [error]="sampleError"
                (retry)="onRetry()"
                (newPayment)="onNewPayment()" />
            }
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="paymentResult.showSuccess" />
                {{ labels.showSuccessStateLabel() }}
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- SPEI Instructions -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">SpeiInstructionsComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            <app-spei-instructions
              [clabe]="speiInstructions.clabe"
              [reference]="speiInstructions.reference"
              [bankCode]="speiInstructions.bankCode"
              [beneficiary]="speiInstructions.beneficiary"
              [amount]="speiInstructions.amount"
              [currency]="speiInstructions.currency"
              [expiresAt]="speiInstructions.expiresAt" />
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <div>
                <label class="label" for="amount">{{ labels.amountLabelShort() }}</label>
                <input
                  id="amount"
                  type="number"
                  class="input"
                  [(ngModel)]="speiInstructions.amount" />
              </div>
              <div>
                <label class="label" for="clabe">{{ labels.clabeLabel() }}</label>
                <input
                  id="clabe"
                  type="text"
                  class="input font-mono"
                  [(ngModel)]="speiInstructions.clabe" />
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Payment Intent Card -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">PaymentIntentCardComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            @if (intentCard().intent; as intent) {
              <app-payment-intent-card
                [intent]="intent"
                [showActions]="intentCard().showActions"
                [expanded]="intentCard().expanded"
                (confirm)="onIntentAction('confirm', $event)"
                (canceled)="onIntentAction('cancel', $event)"
                (refresh)="onIntentAction('refresh', $event)" />
            } @else {
              <p class="text-sm text-gray-500">{{ labels.noProvidersAvailable() }}</p>
            }
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.controlsLabel() }}</h3>
            <div class="space-y-3 text-sm">
              <div>
                <label class="label" for="status">{{ labels.statusLabelShort() }}</label>
                <select id="status" class="input" [(ngModel)]="intentCardStatus">
                  <option value="requires_confirmation">
                    {{ labels.statusRequiresConfirmationLabel() }}
                  </option>
                  <option value="requires_action">{{ labels.statusRequiresActionLabel() }}</option>
                  <option value="processing">{{ labels.processingLabel() }}</option>
                  <option value="succeeded">{{ labels.statusSucceededLabel() }}</option>
                  <option value="failed">{{ labels.statusFailedLabel() }}</option>
                  <option value="canceled">{{ labels.canceledLabel() }}</option>
                </select>
              </div>
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="intentCardShowActions" />
                {{ labels.showActionsLabel() }}
              </label>
              <label class="flex items-center gap-2">
                <input type="checkbox" [(ngModel)]="intentCardExpanded" />
                {{ labels.expandedLabel() }}
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Catalog (real providers from port) -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">Catalog (getProviderDescriptors)</h2>
        <ul class="space-y-2 text-sm">
          @for (entry of catalogDisplay(); track entry.id) {
            <li class="flex items-center gap-2">
              @if (entry.icon) {
                <span>{{ entry.icon }}</span>
              }
              <span class="font-medium">{{ entry.label }}</span>
              @if (entry.description) {
                <span class="text-gray-500">â€” {{ entry.description }}</span>
              }
            </li>
          }
        </ul>
      </section>

      <!-- Demo tokens cheat sheet (fake mode) -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">{{ labels.demoTokensTitle() }}</h2>
        <p class="text-sm text-gray-600 whitespace-pre-line">{{ labels.demoTokensCheatsheet() }}</p>
      </section>

      <!-- Fallback Modal -->
      <section class="card">
        <h2 class="text-xl font-bold mb-4 pb-4 border-b">FallbackModalComponent</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-medium mb-3">{{ labels.previewLabel() }}</h3>
            @if (fallbackModalEvent(); as event) {
              <button class="btn-primary" (click)="fallbackModalOpen = true">
                {{ labels.openFallbackModalLabel() }}
              </button>
              <app-fallback-modal
                [event]="event"
                [open]="fallbackModalOpen"
                (confirm)="onFallbackConfirm($event)"
                (canceled)="fallbackModalOpen = false" />
            } @else {
              <p class="text-sm text-gray-500">{{ labels.noProvidersAvailable() }}</p>
            }
          </div>
          <div>
            <h3 class="font-medium mb-3">{{ labels.infoLabel() }}</h3>
            <p class="text-sm text-gray-600">
              {{ labels.fallbackModalInfoLabel() }}
            </p>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
